id: K-000006
title: Search Relevance Scoring
type: pattern
status: active
confidence: high
content:
  summary: Multi-token OR search with cumulative scoring. Query tokens are matched
    independently (OR logic) and scores accumulate.
  details: '## Scoring Weights (per token match)


    | Match Type | Score |

    |------------|-------|

    | Title contains token | +100 |

    | Title starts with token | +50 (bonus) |

    | Tag contains token | +30 (once per token) |

    | Content contains token | +20 (only with `include_content: true`) |


    ## Priority Boosts (added to matched entries)


    | Status | Multiplier | | Confidence | Multiplier |

    |--------|------------|-|------------|------------|

    | active | 3 × 5 = 15 | | high | 3 × 3 = 9 |

    | draft | 2 × 5 = 10 | | medium | 2 × 3 = 6 |

    | deprecated | 1 × 5 = 5 | | low | 1 × 3 = 3 |


    ## Behavior


    - **Empty query**: Returns all atoms with base score 10 + status/confidence boosts

    - **Multi-token**: Each token is matched independently; scores from all matching
    tokens accumulate

    - **Case-insensitive**: All matching is performed in lowercase

    - **Content search**: Only performed when `include_content: true`; adds +20 per
    token found in summary or details'
  pitfalls: []
  update_notes:
  - date: '2026-01-21'
    note: Initial creation
  - date: '2026-01-21'
    note: Updated
  - date: '2026-01-23'
    note: Updated
language: python
created_at: '2026-01-21'
updated_at: '2026-01-23'
tags:
- search
- ranking
- algorithm
- multi-token
- OR-logic
sources:
- kind: !!python/object/apply:knowledge_mcp.models.enums.SourceKind
  - repo_path
  ref: src/knowledge_mcp/tools/search.py
links: []
supersedes: []
superseded_by: null
