id: K-000003
title: YAML-based Storage Architecture
type: decision
status: active
confidence: high
content:
  summary: YAML-based storage with JSON backward compatibility.
  details: Knowledge is stored as individual YAML files in the `.knowledge/atoms`
    directory. The system uses flat file storage for atoms and a central `index.yaml`
    for fast lookup. `src/knowledge_mcp/storage/atoms.py` handles file operations
    with backward compatibility for legacy JSON files. `src/knowledge_mcp/storage/index.py`
    handles indexing. This design is local-first and git-friendly.
  pitfalls:
  - Manually editing index.yaml or individual atom files can cause desync. Use 'rebuild_index'
    tool if this happens.
  update_notes:
  - date: '2026-01-21'
    note: Initial creation
  - date: '2026-01-23'
    note: Updated
  - date: '2026-01-26'
    note: Updated
  - date: '2026-01-26'
    note: Updated
language: null
created_at: '2026-01-21'
updated_at: '2026-01-26'
tags:
- storage
- architecture
- yaml
- json
sources:
- kind: repo_path
  ref: src/knowledge_mcp/storage/atoms.py
- kind: repo_path
  ref: src/knowledge_mcp/storage/index.py
links: []
supersedes: []
superseded_by: null
